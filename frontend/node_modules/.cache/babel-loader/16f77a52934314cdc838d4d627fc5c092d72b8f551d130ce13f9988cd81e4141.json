{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\20228\\\\OneDrive\\\\Desktop\\\\New\\\\fishing-spots-app\\\\frontend\\\\src\\\\pages\\\\AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { auth, db } from '../firebase';\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { useHistory } from 'react-router-dom';\nimport AdminDashboard from '../components/AdminDashboard';\nimport './AdminPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPage = () => {\n  _s();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n  useEffect(() => {\n    const checkAdmin = async () => {\n      const user = auth.currentUser;\n      if (!user) {\n        history.push('/login');\n        return;\n      }\n      // Only fetch the current user's document\n      const userDoc = await getDoc(doc(db, \"users\", user.uid));\n      if (userDoc.exists() && userDoc.data().role === \"admin\") {\n        setIsAdmin(true);\n      } else {\n        history.push('/home');\n      }\n      setLoading(false);\n    };\n    checkAdmin();\n  }, [history]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 25\n  }, this);\n  if (!isAdmin) return null;\n  return /*#__PURE__*/_jsxDEV(AdminDashboard, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 12\n  }, this);\n};\n_s(AdminPage, \"/Fzev5ciUpN6LvFgtJ1UPIZ8zgo=\", false, function () {\n  return [useHistory];\n});\n_c = AdminPage;\nexport default AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useEffect","useState","auth","db","doc","getDoc","useHistory","AdminDashboard","jsxDEV","_jsxDEV","AdminPage","_s","isAdmin","setIsAdmin","loading","setLoading","history","checkAdmin","user","currentUser","push","userDoc","uid","exists","data","role","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/20228/OneDrive/Desktop/New/fishing-spots-app/frontend/src/pages/AdminPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { auth, db } from '../firebase';\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { useHistory } from 'react-router-dom';\nimport AdminDashboard from '../components/AdminDashboard';\nimport './AdminPage.css';\n\nconst AdminPage = () => {\n    const [isAdmin, setIsAdmin] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const history = useHistory();\n\n    useEffect(() => {\n        const checkAdmin = async () => {\n            const user = auth.currentUser;\n            if (!user) {\n                history.push('/login');\n                return;\n            }\n            // Only fetch the current user's document\n            const userDoc = await getDoc(doc(db, \"users\", user.uid));\n            if (userDoc.exists() && userDoc.data().role === \"admin\") {\n                setIsAdmin(true);\n            } else {\n                history.push('/home');\n            }\n            setLoading(false);\n        };\n        checkAdmin();\n    }, [history]);\n\n    if (loading) return <div>Loading...</div>;\n    if (!isAdmin) return null;\n\n    return <AdminDashboard />;\n};\n\nexport default AdminPage;\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,EAAE,QAAQ,aAAa;AACtC,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAMe,OAAO,GAAGV,UAAU,CAAC,CAAC;EAE5BN,SAAS,CAAC,MAAM;IACZ,MAAMiB,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC3B,MAAMC,IAAI,GAAGhB,IAAI,CAACiB,WAAW;MAC7B,IAAI,CAACD,IAAI,EAAE;QACPF,OAAO,CAACI,IAAI,CAAC,QAAQ,CAAC;QACtB;MACJ;MACA;MACA,MAAMC,OAAO,GAAG,MAAMhB,MAAM,CAACD,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEe,IAAI,CAACI,GAAG,CAAC,CAAC;MACxD,IAAID,OAAO,CAACE,MAAM,CAAC,CAAC,IAAIF,OAAO,CAACG,IAAI,CAAC,CAAC,CAACC,IAAI,KAAK,OAAO,EAAE;QACrDZ,UAAU,CAAC,IAAI,CAAC;MACpB,CAAC,MAAM;QACHG,OAAO,CAACI,IAAI,CAAC,OAAO,CAAC;MACzB;MACAL,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC;IACDE,UAAU,CAAC,CAAC;EAChB,CAAC,EAAE,CAACD,OAAO,CAAC,CAAC;EAEb,IAAIF,OAAO,EAAE,oBAAOL,OAAA;IAAAiB,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACzC,IAAI,CAAClB,OAAO,EAAE,OAAO,IAAI;EAEzB,oBAAOH,OAAA,CAACF,cAAc;IAAAoB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAC7B,CAAC;AAACnB,EAAA,CA5BID,SAAS;EAAA,QAGKJ,UAAU;AAAA;AAAAyB,EAAA,GAHxBrB,SAAS;AA8Bf,eAAeA,SAAS;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}